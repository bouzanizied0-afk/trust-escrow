<div class="flex flex-col h-full bg-dark-900 text-gray-200">
    <main class="flex-1 overflow-y-auto scrollbar-hide" id="p2pInternalContent">
        
        <div id="marketPage" class="p-4">
            <div class="flex border-b border-dark-800 mb-6 text-center">
                <button class="flex-1 py-3 font-semibold border-b-2 border-primary text-primary">Buy</button>
                <button class="flex-1 py-3 font-semibold text-dark-400 hover:text-white">Sell</button>
            </div>

            <div class="space-y-4">
                <div class="bg-dark-800 rounded-xl p-4 border border-dark-700">
                    <div class="flex justify-between items-center mb-3">
                        <span class="font-bold text-lg text-primary">$54,320.50</span>
                        <span class="text-xs bg-dark-700 px-2 py-1 rounded">Verified</span>
                    </div>
                    <div class="flex justify-between text-sm text-dark-400 mb-4">
                        <span>Limit: $500 - $5,000</span>
                        <span>Bank Transfer</span>
                    </div>
                    <button class="w-full bg-primary py-2 rounded-lg font-bold">Buy BTC</button>
                </div>
                </div>
        </div>

        <div id="messagesPage" class="hidden h-full flex flex-col">
            <div class="p-4 border-b border-dark-800 flex items-center space-x-3">
                <button onclick="showP2PSubPage('market')" class="p-2"><i class="fas fa-arrow-left"></i></button>
                <span class="font-bold">Chat with CryptoTrader88</span>
            </div>
            <div class="flex-1 p-4 space-y-4 overflow-y-auto" style="min-height: 300px;">
                <div class="bg-dark-800 p-3 rounded-lg rounded-tl-none max-w-[80%]">Hello, payment sent.</div>
                <div class="bg-primary p-3 rounded-lg rounded-tr-none max-w-[80%] ml-auto text-white">Checking now...</div>
            </div>
            <div class="p-4 border-t border-dark-800 flex space-x-2">
                <input type="text" placeholder="Type message..." class="flex-1 bg-dark-800 rounded-full px-4 py-2 focus:outline-none">
                <button class="bg-primary p-2 rounded-full w-10 h-10"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <div id="ordersPage" class="hidden p-4">
            <h2 class="font-bold mb-4 text-xl">My Orders</h2>
            <div class="bg-dark-800 p-4 rounded-xl border border-warning/30 mb-4">
                <div class="flex justify-between">
                    <span class="font-bold text-warning">Pending Order</span>
                    <span>#TRX-789012</span>
                </div>
                <p class="mt-2 text-sm text-dark-400">Buying 0.5 BTC from CryptoTrader88</p>
            </div>
        </div>

        <div id="disputesPage" class="hidden p-4">
            <h2 class="font-bold mb-4 text-xl text-danger">Active Disputes</h2>
            <div class="bg-dark-800 p-4 rounded-xl border border-danger/30">
                <p class="text-sm font-bold">Dispute #DPT-456789</p>
                <p class="text-xs text-dark-400 mt-1">Waiting for Admin review...</p>
            </div>
        </div>

    </main>

    <nav class="bg-dark-900 border-t border-dark-800 flex text-center">
        <button onclick="showP2PSubPage('market')" class="flex-1 py-3 text-primary"><i class="fas fa-chart-line"></i><br><span class="text-[10px]">Market</span></button>
        <button onclick="showP2PSubPage('messages')" class="flex-1 py-3 text-dark-400"><i class="fas fa-comments"></i><br><span class="text-[10px]">Chat</span></button>
        <button onclick="showP2PSubPage('orders')" class="flex-1 py-3 text-dark-400"><i class="fas fa-list"></i><br><span class="text-[10px]">Orders</span></button>
        <button onclick="showP2PSubPage('disputes')" class="flex-1 py-3 text-dark-400"><i class="fas fa-gavel"></i><br><span class="text-[10px]">Disputes</span></button>
    </nav>
</div>

<script>
    // وظيفة التنقل الداخلي بين صفحات الـ P2P
    function showP2PSubPage(pageId) {
        const pages = ['marketPage', 'messagesPage', 'ordersPage', 'disputesPage'];
        pages.forEach(p => {
            const el = document.getElementById(p);
            if (el) el.classList.add('hidden');
        });
        document.getElementById(pageId + 'Page').classList.remove('hidden');
    }
</script>
