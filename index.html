<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Engine UI Auditor | Ù…Ø­Ù„Ù„ Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø±Ùƒ</title>
    <style>
        body { background: #050505; color: #00ff41; font-family: monospace; padding: 20px; }
        .card { border: 1px solid #333; padding: 15px; margin-bottom: 10px; background: #000; }
        .error { color: #ff3131; border-left: 5px solid #ff3131; padding-right: 10px; }
        .success { color: #00ff41; border-left: 5px solid #00ff41; padding-right: 10px; }
        .highlight { color: #00f2ff; font-weight: bold; }
    </style>
</head>
<body>
    <h2>ğŸ•µï¸ ÙØ­Øµ ØªÙˆØ§ÙÙ‚ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù…Ø¹ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (UI-Sync Check)</h2>
    <div id="report">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</div>

    <script src="Mouhark.js"></script>

    <script>
        function runEngineAudit() {
            const report = document.getElementById('report');
            let html = "";

            if (!window.QUP_Source) {
                report.innerHTML = "<div class='card error'>âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ QUP_Source. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù.</div>";
                return;
            }

            // 1. ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« (The Pulse Callbacks)
            const transmitCode = QUP_Source.transmit.toString();
            const streamCode = QUP_Source.streamLayer ? QUP_Source.streamLayer.toString() : "";

            html += "<div class='card'>";
            html += "<h3>ğŸ” ÙØ­Øµ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«:</h3>";
            
            // Ù‡Ù„ Ø§Ù„Ù…Ø­Ø±Ùƒ ÙŠØ­Ø§ÙˆÙ„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù…ØŸ
            if (transmitCode.includes('updateProgressPulse') || streamCode.includes('updateProgressPulse')) {
                html += "<p class='success'>âœ… Ø§Ù„Ù…Ø­Ø±Ùƒ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£ÙˆØ§Ù…Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù… (Progress Update).</p>";
            } else {
                html += "<p class='error'>âŒ Ø§Ù„Ù…Ø­Ø±Ùƒ 'Ø£Ø¹Ù…Ù‰': Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù„Ø¯Ø§Ù„Ø© updateProgressPulse. Ù„Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø«Ø§Ø¨Øª.</p>";
            }

            // 2. ÙØ­Øµ Ø·Ø±ÙŠÙ‚Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨Ø©
            if (streamCode.includes('totalSize') || transmitCode.includes('size')) {
                html += "<p class='success'>âœ… Ø§Ù„Ù…Ø­Ø±Ùƒ ÙŠØ¯Ø±Ùƒ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„ÙƒÙ„ÙŠ.</p>";
            } else {
                html += "<p class='error'>âŒ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù„Ø§ ÙŠØ­Ø³Ø¨ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙƒÙ„ÙŠØŒ Ù„Ù† ØªØ¸Ù‡Ø± Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© % Ø£Ø¨Ø¯Ø§Ù‹.</p>";
            }
            html += "</div>";

            // 3. Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
            html += "<div class='card highlight'>";
            html += "<h3>ğŸ’¡ Ø§Ù„Ù†ØªÙŠØ¬Ø©:</h3>";
            html += "<p>Ù„ÙƒÙŠ ÙŠØ´ØªØºÙ„ Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ù†Ø³Ø¨Ø©ØŒ ÙŠØ¬Ø¨ Ø£Ù† ØªØ¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ø¯Ø§Ø®Ù„ Ø­Ù„Ù‚Ø© Ø§Ù„ØªÙƒØ±Ø§Ø± (Loop) ÙÙŠ Ù…Ù„Ù Mouhark.js:</p>";
            html += "<code>if(window.updateProgressPulse) window.updateProgressPulse(Ù…Ù‚Ø¯Ø§Ø±_Ø§Ù„Ø²ÙŠØ§Ø¯Ø©);</code>";
            html += "</div>";

            report.innerHTML = html;
        }

        setTimeout(runEngineAudit, 1000);
    </script>
</body>
</html>
