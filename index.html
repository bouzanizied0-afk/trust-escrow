Ø¯<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUP Unified Console | ziedzizou-7b74d</title>
    <style>
        :root {
            --neon-blue: #00f2ff;
            --neon-green: #00ff41;
            --neon-red: #ff3131;
            --dark-bg: #050505;
            --panel-bg: rgba(10, 10, 15, 0.9);
            --border-glow: 0 0 15px rgba(0, 242, 255, 0.3);
        }
        body { background: var(--dark-bg); color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 10px; overflow-x: hidden; margin: 0; height: 100vh; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ - ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª */
        .top-status-bar {
            width: 100%; background: #111; border-bottom: 1px solid var(--neon-blue);
            display: flex; justify-content: space-around; align-items: center; padding: 5px 0;
            font-family: 'Consolas', monospace; font-size: 0.85rem; z-index: 100;
        }
        .mini-counter { color: var(--neon-green); font-weight: bold; border: 1px solid #333; padding: 2px 10px; background: #000; }

        .dashboard { background: var(--panel-bg); border: 1px solid var(--neon-blue); padding: 10px 20px; width: 95%; max-width: 1100px; display: flex; justify-content: space-between; align-items: center; margin: 10px 0; }
        
        .main-container { display: grid; grid-template-columns: 1fr 380px; gap: 15px; width: 98%; max-width: 1300px; height: 60vh; }
        .canvas-section { background: #000; border: 2px solid #1a1a1a; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .chat-section { background: var(--panel-bg); border: 1px solid #222; display: flex; flex-direction: column; border-top: 3px solid var(--neon-blue); }
        
        #messages { flex-grow: 1; padding: 10px; overflow-y: auto; font-family: 'Consolas', monospace; font-size: 0.8rem; background: rgba(0,0,0,0.3); color: #aaa; }
        
        /* Ø£Ø¶ÙˆØ§Ø¡ Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ */
        .bottom-led-bar { display: flex; gap: 20px; margin-top: 10px; background: #111; padding: 5px 20px; border-radius: 20px; border: 1px solid #222; }
        .status-item { display: flex; align-items: center; gap: 8px; font-size: 0.7rem; color: #888; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--neon-red); transition: 0.3s; }
        .dot.online { background: var(--neon-green); box-shadow: 0 0 10px var(--neon-green); }

        .btn { padding: 12px 25px; background: #000; border: 2px solid var(--neon-blue); color: var(--neon-blue); cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 0.8rem; }
        .btn:hover:not(:disabled) { box-shadow: 0 0 15px var(--neon-blue); background: rgba(0, 242, 255, 0.1); }
        .btn:disabled { opacity: 0.2; cursor: not-allowed; }

        #displayScreen, #videoScreen { max-width: 95%; max-height: 95%; display: none; border: 1px solid var(--neon-blue); }
        .bottom-controls { margin-top: 15px; display: flex; gap: 15px; align-items: center; }
        .file-label { cursor:pointer; border:2px solid #fff; padding:10px 20px; font-weight:bold; font-size: 0.8rem; }
    </style>
</head>
<body>

    <div class="top-status-bar">
        <div id="rotaryCounter">CLOCK: 0000000000</div>
        <div style="color: var(--neon-blue);">SYSTEM: <span id="progressStatus" class="mini-counter">0%</span></div>
    </div>

    <div class="dashboard">
        <h3 style="margin:0; color:var(--neon-blue); font-size: 1rem;">QUP CONSOLE | ZIEDZIZOU</h3>
        <div style="font-size: 0.7rem; color: #555;">SECURITY: SHA-256 ENCRYPTED PULSE</div>
    </div>

    <div class="main-container">
        <div class="canvas-section">
            <img id="displayScreen">
            <video id="videoScreen" controls autoplay muted></video>
            <div id="placeholderText" style="color: #111; font-size: 4rem; font-weight: 900; letter-spacing: 10px;">RADAR</div>
        </div>
        <div class="chat-section">
            <div id="messages"></div>
            <div style="padding: 10px; background: #111; display: flex; gap:5px;">
                <input type="text" id="msgInput" placeholder="Enter Command..." style="flex:1; background:#000; color:var(--neon-green); border:1px solid #333; padding:8px; outline:none;">
                <button id="sendMsgBtn" class="btn" style="padding:5px 15px;">Ø¨Ø«</button>
            </div>
        </div>
    </div>

    <div class="bottom-controls">
        <label for="fileInput" class="file-label">ğŸ“‚ Ø§Ø®ØªÙŠØ§Ø± Ù…ØµÙÙˆÙØ©</label>
        <input type="file" id="fileInput" style="display:none;">
        <button id="sendBtn" class="btn" style="border-color:var(--neon-green); color:var(--neon-green);" disabled>Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø¨Ø¶Ø©</button>
        <button id="clearCloudBtn" class="btn" style="border-color:var(--neon-red); color:var(--neon-red);">ØªØ·Ù‡ÙŠØ± Ø§Ù„Ø³Ø­Ø§Ø¨Ø©</button>
    </div>

    <div class="bottom-led-bar">
        <div class="status-item"><div id="connDot" class="dot"></div> FIREBASE</div>
        <div class="status-item"><div id="coreDot" class="dot"></div> ENGINE (CORE)</div>
        <div class="status-item"><div id="sinkDot" class="dot"></div> RECEIVER</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, onValue, set, remove } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAZs0bb_t-bzMtaJqy_W_QDBSdQKHLEiD4",
            authDomain: "ziedzizou-7b74d.firebaseapp.com",
            databaseURL: "https://ziedzizou-7b74d-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "ziedzizou-7b74d",
            storageBucket: "ziedzizou-7b74d.firebasestorage.app",
            messagingSenderId: "937969676323",
            appId: "1:937969676323:web:8c89472de068a2e6cd0196"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const pulseRef = ref(db, 'qup_pulses');

        window.db = db; // Ù„Ø¶Ù…Ø§Ù† ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© Ù„Ù„Ù‚Ø§Ø¹Ø¯Ø©
        window.streamRef = pulseRef;

        window.logToChat = (msg) => {
            const m = document.getElementById('messages');
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
            m.innerHTML += `<div style="margin-bottom:5px;"><span style="color:#555;">[${time}]</span> > ${msg}</div>`;
            m.scrollTop = m.scrollHeight;
        };

        // Ø±Ø¨Ø· Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©
        window.updateProgressPulse = (ratio) => {
            const val = Math.floor(ratio * 100);
            document.getElementById('progressStatus').innerText = val + "%";
        };

        onValue(ref(db, '.info/connected'), (snap) => {
            const dot = document.getElementById('connDot');
            if (snap.val() === true) {
                dot.classList.add('online');
                window.logToChat("<span style='color:var(--neon-green)'>ØªÙ… Ø±Ø¨Ø· Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­.</span>");
            } else {
                dot.classList.remove('online');
            }
        });

        // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ø¶ÙˆØ§Ø¡
        setInterval(() => {
            if(window.QUP_Source) document.getElementById('coreDot').classList.add('online');
            if(window.QUP_Sink) document.getElementById('sinkDot').classList.add('online');
        }, 1000);

        document.getElementById('fileInput').onchange = (e) => {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                const imgDisplay = document.getElementById('displayScreen');
                const videoDisplay = document.getElementById('videoScreen');
                const placeholder = document.getElementById('placeholderText');

                if (placeholder) placeholder.style.display = 'none';

                if (file.type.startsWith('video/')) {
                    imgDisplay.style.display = 'none'; videoDisplay.style.display = 'block'; videoDisplay.src = url;
                } else {
                    videoDisplay.style.display = 'none'; imgDisplay.style.display = 'block'; imgDisplay.src = url;
                }
                document.getElementById('sendBtn').disabled = false;
                window.logToChat(`âœ… Ø¬Ø§Ù‡Ø² Ù„Ø¥Ø·Ù„Ø§Ù‚ Ù…ØµÙÙˆÙØ©: ${file.name}`);
            }
        };

        document.getElementById('sendMsgBtn').onclick = () => {
            const input = document.getElementById('msgInput');
            if(input.value.trim() !== "") {
                window.logToChat(`<span style="color:var(--neon-blue)">COMMAND:</span> ${input.value}`);
                // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ù€ Firebase Ù„Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª
                input.value = "";
            }
        };

        document.getElementById('clearCloudBtn').onclick = async () => {
            if(confirm("ØªØ·Ù‡ÙŠØ± Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) {
                await remove(pulseRef);
                document.getElementById('progressStatus').innerText = "0%";
                window.logToChat("<span style='color:var(--neon-red)'>ğŸš¨ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ø­Ø§Ø¨Ø©.</span>");
            }
        };

        document.getElementById('sendBtn').onclick = () => {
            const fileInput = document.getElementById('fileInput');
            if (window.QUP_Source && fileInput.files[0]) {
                window.logToChat("<span style='color:var(--neon-blue)'>ğŸš€ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø¨Ø¶Ø§Øª...</span>");
                window.QUP_Source.transmit(fileInput.files[0]);
            }
        };
    </script>

    <script src="mouhark.js"></script>
    <script src="moursel.js"></script>
    <script src="mostaqbel.js"></script>

</body>
</html>
